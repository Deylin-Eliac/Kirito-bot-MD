import fs from'fs';import path from'path';const _0x18e7=['writeFileSync','join','parse','mkdirSync','reactionMessage','messages','utf-8','existsSync','stringify','forEach','remoteJid','readFileSync','on','key','data','id','dataPath','message','createMessageWithReactions','handleReaction'];(function(_0x14b16f,_0x5c5b28){const _0x314071=function(_0x2c36b0){while(--_0x2c36b0){_0x14b16f['push'](_0x14b16f['shift']());}};_0x314071(++_0x5c5b28);}(_0x18e7,0x1b0));const _0x34f8=function(_0x14b16f,_0x5c5b28){_0x14b16f=_0x14b16f-0x0;let _0x314071=_0x18e7[_0x14b16f];return _0x314071;};const _0x2a28e7=path[_0x34f8('1')]('./database/reacciones');!fs[_0x34f8('7')](_0x2a28e7)&&fs[_0x34f8('3')](_0x2a28e7,{recursive:!0x1});export const createMessageWithReactions=async(_0x2b6e49,_0x4805d7,_0x3c17cf)=>{const _0x52c80f=_0x4805d7[_0x34f8('12')]['id'],_0x42e9fb={};for(const _0x482c61 in _0x3c17cf){_0x42e9fb[_0x482c61]={type:_0x3c17cf[_0x482c61].type,data:_0x3c17cf[_0x482c61][_0x34f8('13')]};}const _0x14f17a={chat:_0x4805d7[_0x34f8('12')][_0x34f8('a')],id:_0x52c80f,actions:_0x42e9fb},_0x59cf9b=path[_0x34f8('1')](_0x2a28e7,`${_0x52c80f}.json`);fs[_0x34f8('0')](_0x59cf9b,JSON[_0x34f8('8')](_0x14f17a,null,0x2));};export const handleReaction=async(_0x3e81f6,_0x41f78f,_0x14f506)=>{const _0x5ab0cc=_0x3e81f6[_0x34f8('12')],_0x43e0ad=_0x3e81f6.text,_0x2d3656=path[_0x34f8('1')](_0x2a28e7,`${_0x5ab0cc['id']}.json`);if(!fs[_0x34f8('7')](_0x2d3656))return;const _0x26b61f=fs[_0x34f8('b')](_0x2d3656,_0x34f8('6')),_0x4e016f=JSON[_0x34f8('2')](_0x26b61f),_0x25ae45=_0x4e016f.actions[_0x43e0ad];if(!_0x25ae45)return;try{const _0x3f2f7a=getCallbackForAction(_0x25ae45.type);_0x3f2f7a&&await _0x3f2f7a(_0x14f506,_0x3e81f6[_0x34f8('a')],_0x25ae45[_0x34f8('13')]);}catch(_0x3d39e5){console['error'](`Error\x20al\x20ejecutar\x20la\x20acciÃ³n\x20del\x20emoji:\x20${_0x3d39e5}`);}};const actionCallbacks={};export const setActionCallback=(_0x4b0dd5,_0x5a34c2)=>{actionCallbacks[_0x4b0dd5]=_0x5a34c2;};const getCallbackForAction=_0x4e20a8=>actionCallbacks[_0x4e20a8];global.conn.ev[_0x34f8('c')](_0x34f8('5'),async({messages:_0x4f4737})=>{const _0x45f174=_0x4f4737[0x0];if(!_0x45f174?.[_0x34f8('e')]?.[_0x34f8('4')])return;const _0x5936e7=_0x45f174[_0x34f8('e')][_0x34f8('4')],_0x5ccf2c=_0x45f174[_0x34f8('12')].participant||_0x45f174[_0x34f8('12')][_0x34f8('a')];handleReaction(_0x5936e7,_0x5ccf2c,global.conn);});